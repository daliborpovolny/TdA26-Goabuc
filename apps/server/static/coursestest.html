<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Course API Test Page</title>
      <style>
         body { font-family: Arial, sans-serif; margin: 2em; }
         input, button { margin: 0.3em 0; padding: 0.3em; }
         fieldset { margin-bottom: 1em; }
         pre { background: #f4f4f4; padding: 1em; }
      </style>
   </head>
   <body>
      <h1>Course API Test</h1>
      <fieldset>
         <legend>POST /courses</legend>
         <input id="createName" placeholder="Name">
         <input id="createDescription" placeholder="Description">
         <button onclick="createPost()">Create course</button>
      </fieldset>
      <fieldset>
         <legend>GET /courses</legend>
         <input id="loginEmail" placeholder="Email">
         <input id="loginPassword" placeholder="Password" type="password"><br>
         <button onclick="login()">Login</button>
      </fieldset>
      <fieldset>
         <legend>Get /me</legend>
         <button onclick="getMe()">Get Me</button>
      </fieldset>
      <h2>Response</h2>
      <pre id="response"></pre>
      <script>
         let sessionCookie = null;
         
         async function createPost() {
             const body = {
                 name: document.getElementById('createName').value,
                 description: document.getElementById('createDescription').value,
             };
             const res = await fetch('/courses', {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(body),
             });
             const data = await res.json();
             document.getElementById('response').textContent = JSON.stringify(data, null, 2);
         }
         
         async function login() {
             const body = {
                 email: document.getElementById('loginEmail').value,
                 password: document.getElementById('loginPassword').value,
             };
             const res = await fetch('/login', {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(body),
             });
             const data = await res.json();
             document.getElementById('response').textContent = JSON.stringify(data, null, 2);
         
             // capture session cookie if set
             const cookies = res.headers.get('set-cookie');
             if (cookies) {
                 sessionCookie = cookies;
             }
         }
         
         async function getMe() {
             const res = await fetch('/me', {
                 method: 'GET',
                 headers: sessionCookie ? { 'Cookie': sessionCookie } : {},
             });
             const data = await res.json();
             document.getElementById('response').textContent = JSON.stringify(data, null, 2);
         }
      </script>
   </body>
</html>